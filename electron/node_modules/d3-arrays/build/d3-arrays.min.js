!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define("d3-arrays",["exports"],r):r(n.d3_arrays={})}(this,function(n){"use strict";function r(n,r){return r>n?-1:n>r?1:n>=r?0:NaN}function t(n){return 1===n.length&&(n=e(n)),{left:function(r,t,e,u){for(arguments.length<3&&(e=0),arguments.length<4&&(u=r.length);u>e;){var i=e+u>>>1;n(r[i],t)<0?e=i+1:u=i}return e},right:function(r,t,e,u){for(arguments.length<3&&(e=0),arguments.length<4&&(u=r.length);u>e;){var i=e+u>>>1;n(r[i],t)>0?u=i:e=i+1}return e}}}function e(n){return function(t,e){return r(n(t),e)}}function u(n,r){return n>r?-1:r>n?1:r>=n?0:NaN}function i(n){return null===n?NaN:+n}function o(n,r){var t,e,u=n.length,o=0,a=0,f=-1,l=0;if(1===arguments.length)for(;++f<u;)isNaN(t=i(n[f]))||(e=t-o,o+=e/++l,a+=e*(t-o));else for(;++f<u;)isNaN(t=i(r.call(n,n[f],f)))||(e=t-o,o+=e/++l,a+=e*(t-o));return l>1?a/(l-1):void 0}function a(){var n=o.apply(this,arguments);return n?Math.sqrt(n):n}function f(n){var r=[];for(var t in n)r.push({key:t,value:n[t]});return r}function l(n,r){var t,e,u,i=-1,o=n.length;if(1===arguments.length){for(;++i<o;)if(null!=(e=n[i])&&e>=e){t=u=e;break}for(;++i<o;)null!=(e=n[i])&&(t>e&&(t=e),e>u&&(u=e))}else{for(;++i<o;)if(null!=(e=r.call(n,n[i],i))&&e>=e){t=u=e;break}for(;++i<o;)null!=(e=r.call(n,n[i],i))&&(t>e&&(t=e),e>u&&(u=e))}return[t,u]}function s(n){var r=[];for(var t in n)r.push(t);return r}function c(){}function h(n,r){var t=new c;if(n instanceof c)n.each(function(n,r){t.set(r,n)});else if(Array.isArray(n)){var e,u=-1,i=n.length;if(1===arguments.length)for(;++u<i;)t.set(u,n[u]);else for(;++u<i;)t.set(r.call(n,e=n[u],u),e)}else if(n)for(var o in n)t.set(o,n[o]);return t}function g(n,r){var t,e,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(e=n[u])&&e>=e){t=e;break}for(;++u<i;)null!=(e=n[u])&&e>t&&(t=e)}else{for(;++u<i;)if(null!=(e=r.call(n,n[u],u))&&e>=e){t=e;break}for(;++u<i;)null!=(e=r.call(n,n[u],u))&&e>t&&(t=e)}return t}function v(n,r){var t,e=0,u=n.length,o=-1,a=u;if(1===arguments.length)for(;++o<u;)isNaN(t=i(n[o]))?--a:e+=t;else for(;++o<u;)isNaN(t=i(r.call(n,n[o],o)))?--a:e+=t;return a?e/a:void 0}function p(n,r){var t=(n.length-1)*r+1,e=Math.floor(t),u=+n[e-1],i=t-e;return i?u+i*(n[e]-u):u}function m(n,t){var e,u=[],o=n.length,a=-1;if(1===arguments.length)for(;++a<o;)isNaN(e=i(n[a]))||u.push(e);else for(;++a<o;)isNaN(e=i(t.call(n,n[a],a)))||u.push(e);return u.length?p(u.sort(r),.5):void 0}function y(n){for(var r,t,e,u=n.length,i=-1,o=0;++i<u;)o+=n[i].length;for(t=new Array(o);--u>=0;)for(e=n[u],r=e.length;--r>=0;)t[--o]=e[r];return t}function d(n,r){var t,e,u=-1,i=n.length;if(1===arguments.length){for(;++u<i;)if(null!=(e=n[u])&&e>=e){t=e;break}for(;++u<i;)null!=(e=n[u])&&t>e&&(t=e)}else{for(;++u<i;)if(null!=(e=r.call(n,n[u],u))&&e>=e){t=e;break}for(;++u<i;)null!=(e=r.call(n,n[u],u))&&t>e&&(t=e)}return t}function N(){function n(r,o,a,f){if(o>=i.length)return e?e.call(u,r):t?r.sort(t):r;for(var l,s,c,g=-1,v=r.length,p=i[o++],m=h(),y=a();++g<v;)(c=m.get(l=p(s=r[g])+""))?c.push(s):m.set(l,[s]);return m.each(function(r,t){f(y,t,n(r,o,a,f))}),y}function r(n,t){if(t>=i.length)return n;var e=[],u=o[t++];return n.each(function(n,u){e.push({key:u,values:r(n,t)})}),u?e.sort(function(n,r){return u(n.key,r.key)}):e}var t,e,u,i=[],o=[];return u={object:function(r){return n(r,0,k,b)},map:function(r){return n(r,0,w,A)},entries:function(t){return r(n(t,0,w,A),0)},key:function(n){return i.push(n),u},sortKeys:function(n){return o[i.length-1]=n,u},sortValues:function(n){return t=n,u},rollup:function(n){return e=n,u}}}function k(){return{}}function b(n,r,t){n[r]=t}function w(){return h()}function A(n,r,t){n.set(r,t)}function x(n){for(var r,t=0,e=n.length-1,u=n[0],i=new Array(0>e?0:e);e>t;)i[t]=[r=u,u=n[++t]];return i}function M(n,r){for(var t=r.length,e=new Array(t);t--;)e[t]=n[r[t]];return e}function z(n,r,t){(u=arguments.length)<3&&(t=1,2>u&&(r=n,n=0));for(var e=-1,u=0|Math.max(0,Math.ceil((r-n)/t)),i=new Array(u);++e<u;)i[e]=n+e*t;return i}function j(){}function q(n){var r=new j;if(n instanceof j)n.each(function(n){r.add(n)});else if(n)for(var t=0,e=n.length;e>t;++t)r.add(n[t]);return r}function K(n,r,t){(i=arguments.length)<3&&(t=n.length,2>i&&(r=0));for(var e,u,i=t-r;i;)u=Math.random()*i--|0,e=n[i+r],n[i+r]=n[u+r],n[u+r]=e;return n}function L(n,r){var t,e=0,u=n.length,i=-1;if(1===arguments.length)for(;++i<u;)isNaN(t=+n[i])||(e+=t);else for(;++i<u;)isNaN(t=+r.call(n,n[i],i))||(e+=t);return e}function R(n){if(!(u=n.length))return[];for(var r=-1,t=d(n,V),e=new Array(t);++r<t;)for(var u,i=-1,o=e[r]=new Array(u);++i<u;)o[i]=n[i][r];return e}function V(n){return n.length}function $(n){var r=[];for(var t in n)r.push(n[t]);return r}function _(){return R(arguments)}var B=t(r),C=B.right,D=B.left,E="$";c.prototype=h.prototype={has:function(n){return E+n in this},get:function(n){return this[E+n]},set:function(n,r){return this[E+n]=r,this},remove:function(n){var r=E+n;return r in this&&delete this[r]},clear:function(){for(var n in this)n[0]===E&&delete this[n]},keys:function(){var n=[];for(var r in this)r[0]===E&&n.push(r.slice(1));return n},values:function(){var n=[];for(var r in this)r[0]===E&&n.push(this[r]);return n},entries:function(){var n=[];for(var r in this)r[0]===E&&n.push({key:r.slice(1),value:this[r]});return n},size:function(){var n=0;for(var r in this)r[0]===E&&++n;return n},empty:function(){for(var n in this)if(n[0]===E)return!1;return!0},each:function(n){for(var r in this)r[0]===E&&n.call(this,this[r],r.slice(1))}};var F=h.prototype;j.prototype=q.prototype={has:F.has,add:function(n){return n+="",this[E+n]=!0,this},remove:F.remove,clear:F.clear,values:F.keys,size:F.size,empty:F.empty,each:function(n){for(var r in this)r[0]===E&&n.call(this,r.slice(1))}};var G="0.3.1";n.version=G,n.bisect=C,n.bisectRight=C,n.bisectLeft=D,n.ascending=r,n.bisector=t,n.descending=u,n.deviation=a,n.entries=f,n.extent=l,n.keys=s,n.map=h,n.max=g,n.mean=v,n.median=m,n.merge=y,n.min=d,n.nest=N,n.pairs=x,n.permute=M,n.quantile=p,n.range=z,n.set=q,n.shuffle=K,n.sum=L,n.transpose=R,n.values=$,n.variance=o,n.zip=_});
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("d3-color")):"function"==typeof define&&define.amd?define("d3-interpolate",["exports","d3-color"],n):n(t.d3_interpolate={},t.d3_color)}(this,function(t,n){"use strict";function e(t,n){var e,r=[],o=[],u=t.length,a=n.length,i=Math.min(t.length,n.length);for(e=0;i>e;++e)r.push(l(t[e],n[e]));for(;u>e;++e)o[e]=t[e];for(;a>e;++e)o[e]=n[e];return function(t){for(e=0;i>e;++e)o[e]=r[e](t);return o}}function r(t,n){return t=+t,n-=t,function(e){return t+n*e}}function o(t,n){var e,r={},o={};for(e in t)e in n?r[e]=l(t[e],n[e]):o[e]=t[e];for(e in n)e in t||(o[e]=n[e]);return function(t){for(e in r)o[e]=r[e](t);return o}}function u(t){return function(){return t}}function a(t){return function(n){return t(n)+""}}function i(t,n){var e,o,i,l=q.lastIndex=R.lastIndex=0,s=-1,f=[],c=[];for(t+="",n+="";(e=q.exec(t))&&(o=R.exec(n));)(i=o.index)>l&&(i=n.slice(l,i),f[s]?f[s]+=i:f[++s]=i),(e=e[0])===(o=o[0])?f[s]?f[s]+=o:f[++s]=o:(f[++s]=null,c.push({i:s,x:r(e,o)})),l=R.lastIndex;return l<n.length&&(i=n.slice(l),f[s]?f[s]+=i:f[++s]=i),f.length<2?c[0]?a(c[0].x):u(n):(n=c.length,function(t){for(var e,r=0;n>r;++r)f[(e=c[r]).i]=e.x(t);return f.join("")})}function l(t,n){for(var e,r=A.length;--r>=0&&!(e=A[r](t,n)););return e}function s(t,n){return t=+t,n-=t,function(e){return Math.round(t+n*e)}}function f(t){k||(k=document.createElementNS("http://www.w3.org/2000/svg","g")),t&&(k.setAttribute("transform",t),n=k.transform.baseVal.consolidate());var n,e=n?n.matrix:N,r=[e.a,e.b],o=[e.c,e.d],u=h(r),a=c(r,o),i=h(p(o,r,-a))||0;r[0]*o[1]<o[0]*r[1]&&(r[0]*=-1,r[1]*=-1,u*=-1,a*=-1),this.rotate=(u?Math.atan2(r[1],r[0]):Math.atan2(-o[0],o[1]))*I,this.translate=[e.e,e.f],this.scale=[u,i],this.skew=i?Math.atan2(a,i)*I:0}function c(t,n){return t[0]*n[0]+t[1]*n[1]}function h(t){var n=Math.sqrt(c(t,t));return n&&(t[0]/=n,t[1]/=n),n}function p(t,n,e){return t[0]+=e*n[0],t[1]+=e*n[1],t}function d(t){return t.length?t.pop()+",":""}function x(t,n,e,o){if(t[0]!==n[0]||t[1]!==n[1]){var u=e.push("translate(",null,",",null,")");o.push({i:u-4,x:r(t[0],n[0])},{i:u-2,x:r(t[1],n[1])})}else(n[0]||n[1])&&e.push("translate("+n+")")}function g(t,n,e,o){t!==n?(t-n>180?n+=360:n-t>180&&(t+=360),o.push({i:e.push(d(e)+"rotate(",null,")")-2,x:r(t,n)})):n&&e.push(d(e)+"rotate("+n+")")}function v(t,n,e,o){t!==n?o.push({i:e.push(d(e)+"skewX(",null,")")-2,x:r(t,n)}):n&&e.push(d(e)+"skewX("+n+")")}function M(t,n,e,o){if(t[0]!==n[0]||t[1]!==n[1]){var u=e.push(d(e)+"scale(",null,",",null,")");o.push({i:u-4,x:r(t[0],n[0])},{i:u-2,x:r(t[1],n[1])})}else(1!==n[0]||1!==n[1])&&e.push(d(e)+"scale("+n+")")}function w(t,n){var e=[],r=[];return t=new f(t),n=new f(n),x(t.translate,n.translate,e,r),g(t.rotate,n.rotate,e,r),v(t.skew,n.skew,e,r),M(t.scale,n.scale,e,r),t=n=null,function(t){for(var n,o=-1,u=r.length;++o<u;)e[(n=r[o]).i]=n.x(t);return e.join("")}}function m(t){return((t=Math.exp(t))+1/t)/2}function b(t){return((t=Math.exp(t))-1/t)/2}function y(t){return((t=Math.exp(2*t))-1)/(t+1)}function j(t,n){var e,r,o=t[0],u=t[1],a=t[2],i=n[0],l=n[1],s=n[2],f=i-o,c=l-u,h=f*f+c*c;if(X>h)r=Math.log(s/a)/E,e=function(t){return[o+t*f,u+t*c,a*Math.exp(E*t*r)]};else{var p=Math.sqrt(h),d=(s*s-a*a+T*h)/(2*a*S*p),x=(s*s-a*a-T*h)/(2*s*S*p),g=Math.log(Math.sqrt(d*d+1)-d),v=Math.log(Math.sqrt(x*x+1)-x);r=(v-g)/E,e=function(t){var n=t*r,e=m(g),i=a/(S*p)*(e*y(E*n+g)-b(g));return[o+i*f,u+i*c,a*e/m(E*n+g)]}}return e.duration=1e3*r,e}var k,q=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,R=new RegExp(q.source,"g"),A=[function(t,u){var a,l=typeof u;return("string"===l?(a=n.color(u))?(u=a,n.interpolateRgb):i:u instanceof n.color?n.interpolateRgb:Array.isArray(u)?e:"object"===l&&isNaN(u)?o:r)(t,u)}],I=180/Math.PI,N={a:1,b:0,c:0,d:1,e:0,f:0},E=Math.SQRT2,S=2,T=4,X=1e-12,_="0.1.4";t.version=_,t.interpolate=l,t.interpolateArray=e,t.interpolateNumber=r,t.interpolateObject=o,t.interpolateRound=s,t.interpolateString=i,t.interpolateTransform=w,t.interpolateZoom=j,t.interpolators=A});
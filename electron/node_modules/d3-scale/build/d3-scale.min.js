!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-color"),require("d3-arrays"),require("d3-interpolate"),require("d3-format"),require("d3-time-format"),require("d3-time")):"function"==typeof define&&define.amd?define("d3-scale",["exports","d3-color","d3-arrays","d3-interpolate","d3-format","d3-time-format","d3-time"],t):t(n.d3_scale={},n.d3_color,n.d3_arrays,n.d3_interpolate,n.d3_format,n.d3_time_format,n.d3_time)}(this,function(n,t,e,r,u,i,o){"use strict";function a(n,t,e){for(var r=new Array(n),u=-1;++u<n;)r[u]=t+e*u;return r}function c(n,t){function r(e){var r=e+"",o=u.get(r);if(!o){if("range"!==t.t)return;u.set(r,o=n.push(e))}return i[(o-1)%i.length]}var u,i,o;return r.domain=function(i){if(!arguments.length)return n.slice();n=[],u=e.map();for(var o,a,c=-1,f=i.length;++c<f;)u.has(a=(o=i[c])+"")||u.set(a,n.push(o));return r[t.t].apply(r,t.a)},r.range=function(n){return arguments.length?(i=n.slice(),o=0,t={t:"range",a:arguments},r):i.slice()},r.rangePoints=function(e,u){u=arguments.length<2?0:+u;var c=+e[0],f=+e[1],s=n.length<2?(c=(c+f)/2,0):(f-c)/(n.length-1+u);return i=a(n.length,c+s*u/2,s),o=0,t={t:"rangePoints",a:arguments},r},r.rangeRoundPoints=function(e,u){u=arguments.length<2?0:+u;var c=+e[0],f=+e[1],s=n.length<2?(c=f=Math.round((c+f)/2),0):(f-c)/(n.length-1+u)|0;return i=a(n.length,c+Math.round(s*u/2+(f-c-(n.length-1+u)*s)/2),s),o=0,t={t:"rangeRoundPoints",a:arguments},r},r.rangeBands=function(e,u,c){u=arguments.length<2?0:+u,c=arguments.length<3?u:+c;var f=+e[1]<+e[0],s=+e[f-0],l=+e[1-f],h=(l-s)/(n.length-u+2*c);return i=a(n.length,s+h*c,h),f&&i.reverse(),o=h*(1-u),t={t:"rangeBands",a:arguments},r},r.rangeRoundBands=function(e,u,c){u=arguments.length<2?0:+u,c=arguments.length<3?u:+c;var f=+e[1]<+e[0],s=+e[f-0],l=+e[1-f],h=Math.floor((l-s)/(n.length-u+2*c));return i=a(n.length,s+Math.round((l-s-(n.length-u)*h)/2),h),f&&i.reverse(),o=Math.round(h*(1-u)),t={t:"rangeRoundBands",a:arguments},r},r.rangeBand=function(){return o},r.rangeExtent=function(){var n=t.a[0],e=n[0],r=n[n.length-1];return e>r&&(n=r,r=e,e=n),[e,r]},r.copy=function(){return c(n,t)},r.domain(n)}function f(){return c([],{t:"range",a:[[]]})}function s(){return f().range(["#1f77b4","#ff7f0e","#2ca02c","#d62728","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"])}function l(){return f().range(["#393b79","#5254a3","#6b6ecf","#9c9ede","#637939","#8ca252","#b5cf6b","#cedb9c","#8c6d31","#bd9e39","#e7ba52","#e7cb94","#843c39","#ad494a","#d6616b","#e7969c","#7b4173","#a55194","#ce6dbd","#de9ed6"])}function h(){return f().range(["#3182bd","#6baed6","#9ecae1","#c6dbef","#e6550d","#fd8d3c","#fdae6b","#fdd0a2","#31a354","#74c476","#a1d99b","#c7e9c0","#756bb1","#9e9ac8","#bcbddc","#dadaeb","#636363","#969696","#bdbdbd","#d9d9d9"])}function g(){return f().range(["#1f77b4","#aec7e8","#ff7f0e","#ffbb78","#2ca02c","#98df8a","#d62728","#ff9896","#9467bd","#c5b0d5","#8c564b","#c49c94","#e377c2","#f7b6d2","#7f7f7f","#c7c7c7","#bcbd22","#dbdb8d","#17becf","#9edae5"])}function d(n,t){if(n=n.slice(),!t)return n;var e,r=0,u=n.length-1,i=n[r],o=n[u];return i>o&&(e=r,r=u,u=e,e=i,i=o,o=e),n[r]=Math.floor(i/t)*t,n[u]=Math.ceil(o/t)*t,n}function m(n,t){null==t&&(t=10);var e=n[0],r=n[n.length-1];e>r&&(o=r,r=e,e=o);var u=r-e,i=Math.pow(10,Math.floor(Math.log(u/t)/Math.LN10)),o=u/t/i;return o>=V?i*=10:o>=X?i*=5:o>=Z&&(i*=2),[Math.ceil(e/i)*i,Math.floor(r/i)*i+i/2,i]}function p(n,t){return e.range.apply(null,m(n,t))}function b(n,t,e){var r=m(n,t);if(null==e)e=",."+u.precisionFixed(r[2])+"f";else switch(e=u.formatSpecifier(e),e.type){case"s":var i=Math.max(Math.abs(r[0]),Math.abs(r[1]));return null==e.precision&&(e.precision=u.precisionPrefix(r[2],i)),u.formatPrefix(e,i);case"":case"e":case"g":case"p":case"r":null==e.precision&&(e.precision=u.precisionRound(r[2],Math.max(Math.abs(r[0]),Math.abs(r[1])))-("e"===e.type));break;case"f":case"%":null==e.precision&&(e.precision=u.precisionFixed(r[2])-2*("%"===e.type))}return u.format(e)}function M(n,t){return t=(t-=n=+n)||1/t,function(e){return Math.max(0,Math.min(1,(e-n)/t))}}function y(n,t){return t=(t-=n=+n)||1/t,function(e){return(e-n)/t}}function v(n,t,e,r){var u=e(n[0],n[1]),i=r(t[0],t[1]);return function(n){return i(u(n))}}function x(n,t,r,u){var i=Math.min(n.length,t.length)-1,o=new Array(i),a=new Array(i),c=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++c<i;)o[c]=r(n[c],n[c+1]),a[c]=u(t[c],t[c+1]);return function(t){var r=e.bisect(n,t,1,i)-1;return a[r](o[r](t))}}function w(n,t,e,u){function i(){var i=Math.min(n.length,t.length)>2?x:v,f=u?M:y;return a=i(n,t,f,e),c=i(t,n,f,r.interpolateNumber),o}function o(n){return a(n)}var a,c;return o.invert=function(n){return c(n)},o.domain=function(t){return arguments.length?(n=t.map(Number),i()):n.slice()},o.range=function(n){return arguments.length?(t=n.slice(),i()):t.slice()},o.rangeRound=function(n){return o.range(n).interpolate(r.interpolateRound)},o.clamp=function(n){return arguments.length?(u=!!n,i()):u},o.interpolate=function(n){return arguments.length?(e=n,i()):e},o.ticks=function(t){return p(n,t)},o.tickFormat=function(t,e){return b(n,t,e)},o.nice=function(t){return n=d(n,m(n,t)[2]),i()},o.copy=function(){return w(n,t,e,u)},i()}function k(n,t){return n.range=function(){var e=t.range.apply(t,arguments);return e===t?n:e},n.rangeRound=function(){var e=t.rangeRound.apply(t,arguments);return e===t?n:e},n.clamp=function(){var e=t.clamp.apply(t,arguments);return e===t?n:e},n.interpolate=function(){var e=t.interpolate.apply(t,arguments);return e===t?n:e},n}function F(){return w([0,1],[0,1],r.interpolate,!1)}function N(){return F().interpolate(t.interpolateCubehelixLong).range([t.cubehelix(300,.5,0),t.cubehelix(-240,.5,1)])}function q(n){function t(n){return+n}return t.invert=t,t.domain=t.range=function(e){return arguments.length?(n=e.map(Number),t):n.slice()},t.ticks=function(t){return p(n,t)},t.tickFormat=function(t,e){return b(n,t,e)},t.copy=function(){return q(n)},t}function C(){return q([0,1])}function D(n,t,e){function r(n){return(e[0]<0?-Math.log(n>0?0:-n):Math.log(0>n?0:n))/Math.log(t)}function i(n){return e[0]<0?-Math.pow(t,-n):Math.pow(t,n)}function o(t){return n(r(t))}return o.invert=function(t){return i(n.invert(t))},o.base=function(n){return arguments.length?(t=+n,o.domain(e)):t},o.domain=function(t){return arguments.length?(e=t.map(Number),n.domain(e.map(r)),o):e.slice()},o.nice=function(){var t=d(n.domain(),1);return n.domain(t),e=t.map(i),o},o.ticks=function(){var n=e[0],u=e[e.length-1];n>u&&(c=n,n=u,u=c);var o,a,c=Math.floor(r(n)),f=Math.ceil(r(u)),s=t%1?2:t,l=[];if(isFinite(f-c))if(n>0){for(--f,o=1;s>o;++o){if((a=i(c)*o)<n)continue;l.push(a)}for(;++c<f;)for(o=1;s>o;++o)l.push(i(c)*o);for(o=1;s>o&&!((a=i(c)*o)>u);++o)l.push(a)}else{for(++c,o=s-1;o>=1;--o){if((a=i(c)*o)<n)continue;l.push(a)}for(;++c<f;)for(o=s-1;o>=1;--o)l.push(i(c)*o);for(o=s-1;o>=1&&!((a=i(c)*o)>u);--o)l.push(a)}return l},o.tickFormat=function(n,a){if(null==a?a=10===t?$:nn:"function"!=typeof a&&(a=u.format(a)),null==n)return a;var c,f=Math.min(t,o.ticks().length/n),s=e[0]>0?(c=1e-12,Math.ceil):(c=-1e-12,Math.floor);return function(n){return i(s(r(n)+c))/n>=f?a(n):""}},o.copy=function(){return D(n.copy(),t,e)},k(o,n)}function R(){return D(F(),10,[1,10])}function T(n,t,e){function r(n){return 0>n?-Math.pow(-n,t):Math.pow(n,t)}function u(n){return 0>n?-Math.pow(-n,1/t):Math.pow(n,1/t)}function i(t){return n(r(t))}return i.invert=function(t){return u(n.invert(t))},i.exponent=function(n){return arguments.length?(t=+n,i.domain(e)):t},i.domain=function(t){return arguments.length?(e=t.map(Number),n.domain(e.map(r)),i):e.slice()},i.ticks=function(n){return p(e,n)},i.tickFormat=function(n,t){return b(e,n,t)},i.nice=function(n){return i.domain(d(e,m(e,n)[2]))},i.copy=function(){return T(n.copy(),t,e)},k(i,n)}function S(){return T(F(),.5,[0,1])}function U(){return T(F(),1,[0,1])}function _(n,t){function r(){var r=0,o=t.length;for(i=[];++r<o;)i[r-1]=e.quantile(n,r/o);return u}function u(n){return isNaN(n=+n)?void 0:t[e.bisect(i,n)]}var i;return u.domain=function(t){if(!arguments.length)return n;n=[];for(var u,i=0,o=t.length;o>i;++i)u=t[i],null==u||isNaN(u=+u)||n.push(u);return n.sort(e.ascending),r()},u.range=function(n){return arguments.length?(t=n.slice(),r()):t.slice()},u.quantiles=function(){return i},u.invertExtent=function(e){return e=t.indexOf(e),0>e?[NaN,NaN]:[e>0?i[e-1]:n[0],e<i.length?i[e]:n[n.length-1]]},u.copy=function(){return _(n,t)},r()}function B(){return _([],[])}function Y(n,t,e){function r(t){return e[Math.max(0,Math.min(o,Math.floor(i*(t-n))))]}function u(){return i=e.length/(t-n),o=e.length-1,r}var i,o;return r.domain=function(e){return arguments.length?(n=+e[0],t=+e[e.length-1],u()):[n,t]},r.range=function(n){return arguments.length?(e=n.slice(),u()):e.slice()},r.invertExtent=function(t){return t=e.indexOf(t),t=0>t?NaN:t/i+n,[t,t+1/i]},r.copy=function(){return Y(n,t,e)},u()}function P(){return Y(0,1,[0,1])}function H(){return F().interpolate(t.interpolateCubehelixLong).domain([0,.5,1]).range([t.cubehelix(-100,.75,.35),t.cubehelix(80,1.5,.8),t.cubehelix(260,.75,.35)])}function L(n,t,r){function u(u){return u>=u?t[e.bisect(n,u,0,r)]:void 0}return u.domain=function(e){return arguments.length?(n=e.slice(),r=Math.min(n.length,t.length-1),u):n.slice()},u.range=function(e){return arguments.length?(t=e.slice(),r=Math.min(n.length,t.length-1),u):t.slice()},u.invertExtent=function(e){return e=t.indexOf(e),[n[e-1],n[e]]},u.copy=function(){return L(n,t)},u}function E(){return L([.5],[0,1],1)}function I(n){return new Date(n)}function W(n,t,e,r){function u(t){return n(t)}function i(n,e,r,u){switch(null==n&&(n=10),typeof n){case"number":n=A(e,r,n),u=n[1],n=n[0];break;case"string":u=null==u?1:Math.floor(u);break;default:return n}return isFinite(u)&&u>0?t(n,u):null}return u.invert=function(t){return I(n.invert(t))},u.domain=function(t){return arguments.length?(n.domain(t),u):n.domain().map(I)},u.ticks=function(t,e){var r,u=n.domain(),o=u[0],a=u[u.length-1];return o>a&&(r=o,o=a,a=r),(t=i(t,o,a,e))?t.range(o,a+1):[]},u.tickFormat=function(n){return null==n?e:r(n)},u.nice=function(t,e){var r,o=n.domain(),a=0,c=o.length-1,f=o[a],s=o[c];return f>s&&(r=a,a=c,c=r,r=f,f=s,s=r),(t=i(t,f,s,e))&&(o[a]=+t.floor(f),o[c]=+t.ceil(s),n.domain(o)),u},u.copy=function(){return W(n.copy(),t,e,r)},k(u,n)}function A(n,t,e){var r=Math.abs(t-n)/e,u=sn(fn,r);return u===fn.length?["years",m([n/cn,t/cn],e)[2]]:u?fn[r/fn[u-1][2]<fn[u][2]/r?u-1:u]:["milliseconds",m([n,t],e)[2]]}function O(n){return(o.second(n)<n?ln:o.minute(n)<n?hn:o.hour(n)<n?gn:o.day(n)<n?dn:o.month(n)<n?o.week(n)<n?mn:pn:o.year(n)<n?bn:Mn)(n)}function j(n){return{range:function(t,r){return e.range(Math.ceil(t/n)*n,r,n).map(I)},floor:function(t){return I(Math.floor(t/n)*n)},ceil:function(t){return I(Math.ceil(t/n)*n)}}}function z(n,t){switch(n){case"milliseconds":return j(t);case"seconds":return t>1?o.second.filter(function(n){return n.getSeconds()%t===0}):o.second;case"minutes":return t>1?o.minute.filter(function(n){return n.getMinutes()%t===0}):o.minute;case"hours":return t>1?o.hour.filter(function(n){return n.getHours()%t===0}):o.hour;case"days":return t>1?o.day.filter(function(n){return(n.getDate()-1)%t===0}):o.day;case"weeks":return t>1?o.week.filter(function(n){return o.week.count(0,n)%t===0}):o.week;case"months":return t>1?o.month.filter(function(n){return n.getMonth()%t===0}):o.month;case"years":return t>1?o.year.filter(function(n){return n.getFullYear()%t===0}):o.year}}function G(){return W(F(),z,O,i.format).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function J(n){return(o.utcSecond(n)<n?yn:o.utcMinute(n)<n?vn:o.utcHour(n)<n?xn:o.utcDay(n)<n?wn:o.utcMonth(n)<n?o.utcWeek(n)<n?kn:Fn:o.utcYear(n)<n?Nn:qn)(n)}function K(n,t){switch(n){case"milliseconds":return j(t);case"seconds":return t>1?o.utcSecond.filter(function(n){return n.getUTCSeconds()%t===0}):o.utcSecond;case"minutes":return t>1?o.utcMinute.filter(function(n){return n.getUTCMinutes()%t===0}):o.utcMinute;case"hours":return t>1?o.utcHour.filter(function(n){return n.getUTCHours()%t===0}):o.utcHour;case"days":return t>1?o.utcDay.filter(function(n){return(n.getUTCDate()-1)%t===0}):o.utcDay;case"weeks":return t>1?o.utcWeek.filter(function(n){return o.utcWeek.count(0,n)%t===0}):o.utcWeek;case"months":return t>1?o.utcMonth.filter(function(n){return n.getUTCMonth()%t===0}):o.utcMonth;case"years":return t>1?o.utcYear.filter(function(n){return n.getUTCFullYear()%t===0}):o.utcYear}}function Q(){return W(F(),K,J,i.utcFormat).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}var V=Math.sqrt(50),X=Math.sqrt(10),Z=Math.sqrt(2),$=u.format(".0e"),nn=u.format(","),tn=1e3,en=60*tn,rn=60*en,un=24*rn,on=7*un,an=30*un,cn=365*un,fn=[["seconds",1,tn],["seconds",5,5*tn],["seconds",15,15*tn],["seconds",30,30*tn],["minutes",1,en],["minutes",5,5*en],["minutes",15,15*en],["minutes",30,30*en],["hours",1,rn],["hours",3,3*rn],["hours",6,6*rn],["hours",12,12*rn],["days",1,un],["days",2,2*un],["weeks",1,on],["months",1,an],["months",3,3*an],["years",1,cn]],sn=e.bisector(function(n){return n[2]}).right,ln=i.format(".%L"),hn=i.format(":%S"),gn=i.format("%I:%M"),dn=i.format("%I %p"),mn=i.format("%a %d"),pn=i.format("%b %d"),bn=i.format("%B"),Mn=i.format("%Y"),yn=i.utcFormat(".%L"),vn=i.utcFormat(":%S"),xn=i.utcFormat("%I:%M"),wn=i.utcFormat("%I %p"),kn=i.utcFormat("%a %d"),Fn=i.utcFormat("%b %d"),Nn=i.utcFormat("%B"),qn=i.utcFormat("%Y"),Cn="0.1.5";n.version=Cn,n.category10=s,n.category20b=l,n.category20c=h,n.category20=g,n.cubehelix=N,n.identity=C,n.linear=F,n.log=R,n.ordinal=f,n.pow=U,n.sqrt=S,n.quantile=B,n.quantize=P,n.rainbow=H,n.threshold=E,n.time=G,n.utcTime=Q});
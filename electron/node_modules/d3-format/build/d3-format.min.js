!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports):"function"==typeof define&&define.amd?define("d3-format",["exports"],r):r(n.d3_format={})}(this,function(n){"use strict";function r(n,r){if((t=(n=r?n.toExponential(r-1):n.toExponential()).indexOf("e"))<0)return null;var t,e=n.slice(0,t);return[e.length>1?e[0]+e.slice(2):e,+n.slice(t+1)]}function t(n){return n=r(Math.abs(n)),n?n[1]:NaN}function e(n,r){return function(t,e){for(var i=t.length,o=[],a=0,u=n[0],c=0;i>0&&u>0&&(c+u+1>e&&(u=Math.max(1,e-c)),o.push(t.substring(i-=u,i+u)),!((c+=u+1)>e));)u=n[a=(a+1)%n.length];return o.reverse().join(r)}}function i(n,t){var e=r(n,t);if(!e)return n+"";var i=e[0],o=e[1],a=o-(m=3*Math.max(-8,Math.min(8,Math.floor(o/3))))+1,u=i.length;return a===u?i:a>u?i+new Array(a-u+1).join("0"):a>0?i.slice(0,a)+"."+i.slice(a):"0."+new Array(1-a).join("0")+r(n,Math.max(0,t+a-1))[0]}function o(n,t){var e=r(n,t);if(!e)return n+"";var i=e[0],o=e[1];return 0>o?"0."+new Array(-o).join("0")+i:i.length>o+1?i.slice(0,o+1)+"."+i.slice(o+1):i+new Array(o-i.length+2).join("0")}function a(n,r){n=n.toPrecision(r);n:for(var t,e=n.length,i=1,o=-1;e>i;++i)switch(n[i]){case".":o=t=i;break;case"0":0===o&&(o=i),t=i;break;case"e":break n;default:o>0&&(o=0)}return o>0?n.slice(0,o)+n.slice(t+1):n}function u(n){return new c(n)}function c(n){if(!(r=K.exec(n)))throw new Error("invalid format: "+n);var r,t=r[1]||" ",e=r[2]||">",i=r[3]||"-",o=r[4]||"",a=!!r[5],u=r[6]&&+r[6],c=!!r[7],s=r[8]&&+r[8].slice(1),h=r[9]||"";"n"===h?(c=!0,h="g"):I[h]||(h=""),(a||"0"===t&&"="===e)&&(a=!0,t="0",e="="),this.fill=t,this.align=e,this.sign=i,this.symbol=o,this.zero=a,this.width=u,this.comma=c,this.precision=s,this.type=h}function s(n){return n}function h(n){function r(n){n=u(n);var r=n.fill,t=n.align,e=n.sign,i=n.symbol,s=n.zero,h=n.width,l=n.comma,f=n.precision,g=n.type,d="$"===i?a[0]:"#"===i&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",p="$"===i?a[1]:/[%p]/.test(g)?"%":"",y=I[g],M=!g||/[defgprs%]/.test(g);return f=null==f?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,f)):Math.max(0,Math.min(20,f)),function(n){var i=d,a=p;if("c"===g)a=y(n)+a,n="";else{n=+n;var u=(0>n||0>1/n)&&(n*=-1,!0);if(n=y(n,f),u){var x,v=-1,b=n.length;for(u=!1;++v<b;)if(x=n.charCodeAt(v),x>48&&58>x||"x"===g&&x>96&&103>x||"X"===g&&x>64&&71>x){u=!0;break}}if(i=(u?"("===e?e:"-":"-"===e||"("===e?"":e)+i,a=a+("s"===g?X[8+m/3]:"")+(u&&"("===e?")":""),M)for(var x,v=-1,b=n.length;++v<b;)if(x=n.charCodeAt(v),48>x||x>57){a=(46===x?c+n.slice(v+1):n.slice(v))+a,n=n.slice(0,v);break}}l&&!s&&(n=o(n,1/0));var w=i.length+n.length+a.length,S=h>w?new Array(h-w+1).join(r):"";switch(l&&s&&(n=o(S+n,S.length?h-a.length:1/0),S=""),t){case"<":return i+n+a+S;case"=":return i+S+n+a;case"^":return S.slice(0,w=S.length>>1)+i+n+a+S.slice(w)}return S+i+n+a}}function i(n,e){var i=r((n=u(n),n.type="f",n)),o=3*Math.max(-8,Math.min(8,Math.floor(t(e)/3))),a=Math.pow(10,-o),c=X[8+o/3];return function(n){return i(a*n)+c}}var o=n.grouping&&n.thousands?e(n.grouping,n.thousands):s,a=n.currency,c=n.decimal;return{format:r,formatPrefix:i}}function l(n){return Math.max(0,-t(Math.abs(n)))}function f(n,r){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(t(r)/3)))-t(Math.abs(n)))}function g(n,r){return Math.max(0,t(Math.abs(r))-t(Math.abs(n)))+1}function d(n){if("string"==typeof n){if(!B.hasOwnProperty(n))return null;n=B[n]}return h(n)}var m,p={decimal:".",thousands:",",grouping:[3],currency:["¥",""]},y={decimal:",",thousands:" ",grouping:[3],currency:["","SEK"]},M={decimal:",",thousands:" ",grouping:[3],currency:[""," руб."]},x={decimal:",",thousands:".",grouping:[3],currency:["R$",""]},v={decimal:",",thousands:".",grouping:[3],currency:["","zł"]},b={decimal:",",thousands:".",grouping:[3],currency:["€ ",""]},w={decimal:",",thousands:".",grouping:[3],currency:[""," ден."]},S={decimal:".",thousands:",",grouping:[3],currency:["₩",""]},E={decimal:".",thousands:",",grouping:[3],currency:["","円"]},P={decimal:",",thousands:".",grouping:[3],currency:["€",""]},A={decimal:",",thousands:" ",grouping:[3],currency:[""," Ft"]},C={decimal:".",thousands:",",grouping:[3],currency:["₪",""]},j={decimal:",",thousands:".",grouping:[3],currency:[""," €"]},k={decimal:",",thousands:" ",grouping:[3],currency:["","$"]},F={decimal:",",thousands:" ",grouping:[3],currency:[""," €"]},$={decimal:",",thousands:".",grouping:[3],currency:[""," €"]},z={decimal:".",thousands:",",grouping:[3],currency:["$",""]},R={decimal:".",thousands:",",grouping:[3],currency:["£",""]},L={decimal:".",thousands:",",grouping:[3],currency:["$",""]},N={decimal:",",thousands:".",grouping:[3],currency:[""," €"]},U={decimal:",",thousands:"'",grouping:[3],currency:[""," CHF"]},H={decimal:",",thousands:".",grouping:[3],currency:[""," €"]},I={"":a,"%":function(n,r){return(100*n).toFixed(r)},b:function(n){return Math.round(n).toString(2)},c:function(n){return n+""},d:function(n){return Math.round(n).toString(10)},e:function(n,r){return n.toExponential(r)},f:function(n,r){return n.toFixed(r)},g:function(n,r){return n.toPrecision(r)},o:function(n){return Math.round(n).toString(8)},p:function(n,r){return o(100*n,r)},r:o,s:i,X:function(n){return Math.round(n).toString(16).toUpperCase()},x:function(n){return Math.round(n).toString(16)}},K=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;c.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var X=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"],B={"ca-ES":H,"de-CH":U,"de-DE":N,"en-CA":L,"en-GB":R,"en-US":z,"es-ES":$,"fi-FI":F,"fr-CA":k,"fr-FR":j,"he-IL":C,"hu-HU":A,"it-IT":P,"ja-JP":E,"ko-KR":S,"mk-MK":w,"nl-NL":b,"pl-PL":v,"pt-BR":x,"ru-RU":M,"sv-SE":y,"zh-CN":p},G=h(z),O=G.format,T=G.formatPrefix,D="0.3.6";n.version=D,n.format=O,n.formatPrefix=T,n.localeFormat=d,n.formatSpecifier=u,n.precisionFixed=l,n.precisionPrefix=f,n.precisionRound=g});